<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Gundaroo Common — Community Survey 2025</title>
  <meta name="description" content="Visual summary of the Gundaroo Common Community Survey 2025." />
  <style>
    :root{
      --bg:#ffffff; --fg:#111; --muted:#666; --card:#f7f7f8; --border:#e6e6e9; --link:#0a66c2;
    }
    @media (prefers-color-scheme: dark){
      :root{
        --bg:#0b0b0c; --fg:#f4f4f5; --muted:#a1a1aa; --card:#161618; --border:#2a2a30; --link:#76b6ff;
      }
    }
    html,body{margin:0;padding:0;background:var(--bg);color:var(--fg);font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial,"Noto Sans",sans-serif}
    .wrap{max-width:820px;margin:auto;padding:24px}
    header{margin:8px 0 20px}
    h1{font-size:1.75rem;line-height:1.2;margin:0 0 8px}
    .lede{color:var(--muted);margin:0 0 16px}
    .actions{display:flex;gap:12px;flex-wrap:wrap}
    .btn{
      display:inline-flex;align-items:center;gap:8px;
      border:1px solid var(--border);background:var(--card);color:var(--fg);
      padding:10px 14px;border-radius:999px;text-decoration:none
    }
    .btn:hover{border-color:var(--link)}
    .qcard{
      border:1px solid var(--border);background:var(--card);
      border-radius:14px;padding:14px 14px 10px;margin:14px 0
    }
    .qid{font-size:.8rem;color:var(--muted);letter-spacing:.02em}
    .qtext{margin:4px 0 10px;font-weight:600}
    figure{margin:0}
    img.chart{width:100%;height:auto;display:block;border-radius:10px}
    .placeholder{
      display:grid;place-items:center;height:220px;background:repeating-linear-gradient(135deg,var(--bg),var(--bg) 8px,var(--card) 8px,var(--card) 16px);
      color:var(--muted);border:1px dashed var(--border);border-radius:10px;font-size:.95rem
    }
    figcaption{color:var(--muted);font-size:.85rem;margin-top:8px}
    footer{color:var(--muted);font-size:.85rem;margin:28px 0 8px}
    a{color:var(--link)}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>Gundaroo Common — Community Survey 2025</h1>
      <p class="lede">Visual summary of key results. Each item shows the original question followed by its response figure.</p>
      <div class="actions">
        <a id="downloadBtn" class="btn" href="#" download>
          <!-- simple icon -->
          <svg width="18" height="18" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M12 3a1 1 0 0 1 1 1v8.586l2.293-2.293a1 1 0 1 1 1.414 1.414l-4.004 4.004a1 1 0 0 1-1.414 0L7.285 11.707A1 1 0 1 1 8.7 10.293L11 12.586V4a1 1 0 0 1 1-1ZM5 20a1 1 0 1 1 0-2h14a1 1 0 1 1 0 2H5Z"/></svg>
          Download full report (PDF)
        </a>
      </div>
    </header>

    <main id="list"></main>

    <footer>
      Questions are taken from the 2025 community survey report (see Appendix 4). :contentReference[oaicite:0]{index=0}
    </footer>
  </div>

  <script>
    // === Configure these two paths for your repo ===
    const REPORT_PDF = "/assets/report_gundaroo_survey.pdf"; // e.g. /assets/... or /report_gundaroo_survey.pdf
    const FIG_BASE   = "/figures/";                            // folder with your exported charts

    // Map each original survey item to a (question, figure file) pair.
    // If you don't have a figure yet, leave img as null or "" — a placeholder will appear.
    const ITEMS = [
      { q: "How many people live in your household?",                                img: "Q1_survey_b_household_size_v2.png",            alt: "Distribution of household sizes" },
      { q: "In which zone does your household reside?",                              img: "Q2_survey_c_zone_ab_v2.png",            alt: "Respondents by village vs district" },
      { q: "Before today, were you or your household aware of our village Common?",  img: "awareness.png",                 alt: "Awareness of the Common" },
      { q: "Is anyone in your household a Commoner?",                                img: "Q4_survey_d_commoners_v2.png",             alt: "Commoner roll membership" },
      { q: "In an average month, how often would you visit the Common?",             img: "Q5_f1_survey_e_colF_avg_month_barh.png",      alt: "Frequency of visitation" },
      { q: "Which activities have members of your household engaged in? (all that apply)", img: "Q6_f2_survey_colG_barh_grouped_lt3_other.png",   alt: "Activities on the Common" },
      { q: "Select your household’s single primary use of the Common.",              img: "Q7_f3_survey_g_colH_horizontal.png",               alt: "Primary use of the Common" },
      { q: "Rate the overall value of the Common to your household (1–5).",          img: "Q8_importance.png",              alt: "Value rating distribution" },
      { q: "If you value the Common, what are the main reasons?",                    img: "q9_value_reasons.png",         alt: "Reasons for valuing the Common" },
      { q: "How important is the Common to your overall sense of community (1–5)?",  img: "Q10_sense_community.png",        alt: "Sense-of-community rating" },
      { q: "Would you consider donating money to support management?",               img: "Q11_survey_k_colL_donation.png",      alt: "Willingness to donate" },
      { q: "Open-text comments: themes and topics.",                                 img: "comments_themes.png",           alt: "Thematic breakdown of comments" }
    ];

    // --- render ---
    document.getElementById("downloadBtn").href = REPORT_PDF;

    const host = document.getElementById("list");
    ITEMS.forEach((item, i) => {
      const card = document.createElement("section");
      card.className = "qcard";
      card.innerHTML = `
        <div class="qid">Question ${i+1}</div>
        <div class="qtext">${item.q}</div>
        <figure>
          ${item.img
            ? `<img class="chart" loading="lazy" decoding="async" alt="${item.alt||""}" src="${FIG_BASE + item.img}" onerror="this.closest('figure').replaceWith(makePlaceholder('${escapeHtml(item.img)}'));">`
            : `<div class="placeholder">Figure coming soon</div>`
          }
          <figcaption>${item.alt ? item.alt : "Response figure"}</figcaption>
        </figure>
      `;
      host.appendChild(card);
    });

    // utilities
    function makePlaceholder(name){
      const d = document.createElement('div');
      d.className = 'placeholder';
      d.textContent = `Figure coming soon (${name})`;
      return d;
    }
    function escapeHtml(s){
      return (s||"").replace(/[&<>"']/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m]));
    }
  </script>
</body>
</html>
